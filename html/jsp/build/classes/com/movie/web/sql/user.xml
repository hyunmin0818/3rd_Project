
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="User">

<select id="submit" parameterType="hashmap" resultType="_int">
SELECT COUNT(*) FROM user WHERE user_id = #{user_id} AND userpassword  = #{userpassword}
</select>

<select id="getList" parameterType="hashmap" resultType="userdto">
	SELECT * FROM user_info WHERE user_id = #{user_id}
</select>

 <insert id="join" parameterType="com.movie.web.dto.UserDTO">
INSERT INTO user values(
	#{user_id},
	#{userpassword},
	#{user_name},
	#{email},
	#{userphone},
	#{userbirth},
	NULL
)
</insert>

<select id="checkId" parameterType="userdto" resultType="_int">
	SELECT COUNT(*) FROM user WHERE user_id = #{user_id}
</select>

<select id="checkmovie" parameterType="hashmap" resultType="movieDTO">
SELECT * FROM movie
</select>

<select id="userLikeSearch" parameterType="string" resultType="java.lang.String">
    SELECT m.title
    FROM user u
    JOIN movie_likes ml ON u.user_id = ml.user_id
    JOIN movie m ON ml.movieSeq = m.movieSeq
    WHERE u.user_id = #{user_id}
</select>

</mapper>